dist: trusty
sudo: false
language: python
python:
- 3.5

branches:
    only:
        - master
env:
- secure: "kBOrnlgHB97Y6WWU4NpH9wuHUAJcJQIvP0UGT4tHnAIcBbnXFF/sBXZ2hm1HEOo7mqgcny454bafBkhxL1iaIVYlycW4lO5CoRAO0EIJO61aOOOnB4VPq7nFqyeM+kzKKfj3merrtxwVLhFm+OpEzzGiDf33Tim4xzPxOZoU16eKTHhR1G9FTmF0hfaC4XxWIM5ZSELx1bu2xPdjjRELNrijNMw4oPlG9qZ3xXrL04gNpQzRecThm31quVKheczEnqXdtzd9HglpOL66jR0F1uKKkmF6ATyvki+E9eFOSy3BylrlVrMUeix+5MVXo9/4eyudWK9jNrOu4hcXSVmAPUErgkYRL2zinnRs0RJcboX+ujN/EgWLVWp2N74fnBxkV4Opo/XMsI/d1ESsXrROj+tbzre0h+8MNTNJeHUkwexm7zExSHSwwPhFQ8B547Valu5ue32Hodo6T9wHRJN3wuVLGk7ow1zGz0m5+Up3MVOjSJ3Z/MuC8zYHEEYe45QOHLt2KSETVfXvXF71qTksreeePbRDs4CFEUiGxrMpiDSv5332JBl0AlhSSfidnoU73tgk9OtDeh5tZ76BxqLuXHYqk/Cuw5yMz7/rwGBHAzqq/DGt5EiFS8JsZWDbhIYaO9xOPgj1TRbJnachHmowYlTWuu4AID81q/9ZfVwH4UI="

before_install:
- openssl aes-256-cbc -K $encrypted_bf8b0267ba78_key -iv $encrypted_bf8b0267ba78_iv -in oe_license.txt.enc -out oe_license.txt -d
- wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh
- bash miniconda.sh -b -p $HOME/miniconda
- export PATH=$HOME/miniconda/bin:$PATH
- hash -r
- conda config --set always_yes true --set changeps1 no
- conda update --yes -q conda
- conda info -a

install:
- pip install --extra-index-url https://pypi.anaconda.org/t/$CONDA_TOKEN/OpenEye/label/Orion/simple OpenEye-floe-pkg-tools
- floe_env --no-pip openmm_linux
- source activate openmm_linux
- pip install --extra-index-url https://pypi.anaconda.org/OpenEye/simple
    --extra-index-url https://pypi.anaconda.org/t/$CONDA_TOKEN/OpenEye/label/Orion/simple -r dev_requirements.txt

script:
# Test cubes
- py.test -v -s PlatformTestCubes
- py.test -v -s LigPrepCubes
- py.test -v -s OpenMMCubes
- py.test -v -s YankCubes
# Test floes
#- py.test -v -s floes/floe_tests/
